---
title: 利用美术资源修复锯齿
date: 2024-08-18 20:11:00 +0800
categories: [GLSL, Shader]
tags: [glsl]    
---

*平时项目修复锯齿问题的方法记录*

---


### 什么是画面锯齿


- 在渲染结果图像上颜色剧烈变化的区域出现锯齿状一样的斑纹的现象。如下图：   
![画面锯齿](/assets/img/postAssets/aliasing_1.jpg)
- 出现这种情况，是因为我们的屏幕，是以一个个正方形的像素点组成的。而正方形的特性会导致像素渲染在非直线时，
边缘必定会出现一个个突起的阶梯状“毛刺”。

---

### 使用美术资源解决 Why？

- 之所以使用美术资源解决，而不使用后处理的方式，其实是与车载项目有关。  
  1.通常的车机3D场景。一般只有3D车模、背景、地面等组成。  
  >渲染物体数量少，所以可以花时间尽可能在资源上解决问题。  

  2.通常车机安卓侧的渲染分辨率大概都是4k以上  *(目前还没见过1080p的)*
  >因为高分辨率的缘故，基本车模边缘都会出现明显锯齿。但由于性能关系。只会调用低级别的全局MSAA。
   
- 在美术贴图优化上就是MSAA的逻辑，如图：   
![贴图锯齿优化](/assets/img/postAssets/aliasing.jpg)  
我们在贴图上将比较实的边缘，颜色值递减，外移2~3个像素即可。

---
### 高光反射锯齿

- 这是因为PBR材质的高光和反射产生的锯齿，这种锯齿是MSAA和贴图优化都解决不了的。 
![高光锯齿](/assets/img/postAssets/aliasing_car.jpg "锯齿画面")     
  1.通常3D车模的精度比较高，在车身结构上有着比较小的倒角。这些倒角在高分辨的情况下会反射高光。   
  >加大模型倒角面积。达到增加渲染像素的效果。   
  
  2.在高光计算上面乘一个Mask贴图。使其高光反射不生效。   
  >烂办法，但简单有效。😂

